<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Friend Finder Survey</title>

    <!-- Latest compiled and minified CSS & JS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

</head>
<body>

<div class="container">

    <div class="row">
        <div class="col-lg-12">
            <h1>Survey Questions</h1>
            <hr>
            <h2>About You</h2>
            <form role="form">

                <div class="form-group">
                    <label for="name"><h4>Name</h4></label>
                    <input type="text" class="form-control" id="name">

                    <label for="photo"><h4>Link to Photo (Required for some reason)</h4></label>
                    <input type="text" class="form-control" id="photo">
                </div>

                <hr>

                <div class="form-group">

                    <h3>Question 1</h3>
                    <h4>Long silences make you uncomfortable.</h4>
                    <select data-placeholder="" class="chosen-select" id="question1">
                        <option value="Choose one"></option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>

                    <h3>Question 2</h3>
                    <h4>You'd rather have a root canal than go to a party with more than 10 people.</h4>
                    <select data-placeholder="" class="chosen-select" id="question2">
                        <option value="Choose one"></option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>

                    <h3>Question 3</h3>
                    <h4>You think "Godfather: Part III" is underrated.</h4>
                    <select data-placeholder="" class="chosen-select" id="question3">
                        <option value="Choose one"></option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>

                    <h3>Question 4</h3>
                    <h4>When birthday cake is being handed out, you ask for a piece "without a lot of icing" (like a psychopath).</h4>
                    <select data-placeholder="" class="chosen-select" id="question4">
                        <option value="Choose one"></option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>

                    <h3>Question 5</h3>
                    <h4>You've seen "Citizen Cane."</h4>
                    <select data-placeholder="" class="chosen-select" id="question5">
                        <option value="Choose one"></option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>

                    <h3>Question 6</h3>
                    <h4>You've never seen "Citizen Cane," but you tell your friends you have to seem smart.</h4>
                    <select data-placeholder="" class="chosen-select" id="question6">
                        <option value="Choose one"></option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>

                    <h3>Question 7</h3>
                    <h4>You were Team Aniston.</h4>
                    <select data-placeholder="" class="chosen-select" id="question7">
                        <option value="Choose one"></option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>


                    <h3>Question 8</h3>
                    <h4>You've clicked on a link with the words "Taylor Swift" in the title more than once in your life.</h4>
                    <select data-placeholder="" class="chosen-select" id="question8">
                        <option value="Choose one"></option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>

                    <h3>Question 9</h3>
                    <h4>You say things like "irregardless" and "supposably".</h4>
                    <select data-placeholder="" class="chosen-select" id="question9">
                        <option value="Choose one"></option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>

                    <h3>Question 10</h3>
                    <h4>Stupid quizzes are a pointless exercise and never lead to meaningful connections.</h4>
                    <select data-placeholder="" class="chosen-select" id="question10">
                        <option value="Choose one"></option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>

                </div>

                <div class="form-group">
                    <button id="submit" class="btn btn-primary submit">Submit</button>
                </div>
            </form>

        </div>
    </div>

    <!--If I got the comparison working, this would be the html code used to display the modal-->
    <!--<div class="modal-content" id="friend-modal">-->
        <!--<div class="modal-body">-->
            <!--<div id="friend-name"></div>-->
            <!--<div id="friend-photo"></div>-->
        <!--</div>-->
            <!--<button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>-->
    <!--</div>-->

</div>


<script type="text/javascript">

    var diffArray = [];
    var difference;
    var friendName;
    var friendPhoto;

    $("#submit").on("click", function(event) {
        event.preventDefault();

        //Capture user input data
        var newFriend = {
            name: $("#name").val().trim(),
            photo: $("#photo").val().trim(),
            scores: [
                Math.abs($("#question1").val().trim()),
                Math.abs($("#question2").val().trim()),
                Math.abs($("#question3").val().trim()),
                Math.abs($("#question4").val().trim()),
                Math.abs($("#question5").val().trim()),
                Math.abs($("#question6").val().trim()),
                Math.abs($("#question7").val().trim()),
                Math.abs($("#question8").val().trim()),
                Math.abs($("#question9").val().trim()),
                Math.abs($("#question10").val().trim())
            ]
        };


        //Post user input data
        $.post("/api/friends", newFriend,
            function(data) {

                $("#name").val("");
                $("#photo").val("");
                $("#question1").val("");
                $("#question2").val("");
                $("#question3").val("");
                $("#question4").val("");
                $("#question5").val("");
                $("#question6").val("");
                $("#question7").val("");
                $("#question8").val("");
                $("#question9").val("");
                $("#question10").val("");
            });

// Comparison -- NOT WORKING ===========================================================
        //Pull data from friends array so we can compare
        $.get("/api/friends", function (res) {

            //Loop through the friends array
            for (i = 0; i < res.length - 1; i++) {

                //Loop through the scores array within the friends array
                //Get the absolute value of those scores and push them to a new array
                for (j = 0; j < 10; j++) {
                    difference = newFriend.scores[j] - res[i].scores[j];
                    diffArray.push(Math.abs(difference));
                }

                diffSums();

                totalDiff();
            }
        });


        //Total the differences
        function diffSums (numA, numB) {
            return numA + numB;
        }

        function totalDiff () {
            diffArray.reduce(diffSums);
        }

        console.log(diffArray);

        //Modal info -- Used if I'd gotten comparison working.
//        $("#friend-modal").modal(show);
//        $("#friend-name").html(friendName);
//        $("#friend-photo").html(friendPhoto)
//==========================================================================================


    });

</script>

</body>
</html>